___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Event Data to FB Conversion API",
  "categories": [
    "ADVERTISING",
    "ANALYTICS",
    "CONVERSIONS",
    "MARKETING",
    "REMARKETING"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "GTM Server",
    "thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAQECAQEBAgICAgICAgICAQICAgICAgICAgL/2wBDAQEBAQEBAQEBAQECAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL/wAARCAEAAQADAREAAhEBAxEB/8QAHwABAAIBBAMBAAAAAAAAAAAAAAIEBQMGCAoBBwkL/8QAUhAAAAUBAwYFEQcDAgUCBwAAAAECAwQFBgcRCBITMUHBIWFygdEJFCIyM0JRUnF0kZKhsbKz4QojU1TS0/AVk5QkKBYXGDdiJ0M0R0hngqLC/8QAHQEBAAICAwEBAAAAAAAAAAAAAAECAwcEBggFCf/EAFMRAAEDAQMFCgkJBQYGAQUAAAEAAgMRBAUSBhMhMVEiMkFSYXGBobHBBxQjM0Jyc5HRFkNTYpKiwtLwFYLT4eIkJURVo/EINEVUY5OyZIOEs8P/2gAMAwEAAhEDEQA/APgE73aR5zJ+e4P0WZvQvyTl847o7AoCyxoCICICICICICICICICICICICICICICICICICICICICICICICICICICICICKbfdG+Wn4iFX7x3MexSNfQexHe7SPOZPz3AZvQry+cd0dgUBZY0BEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBEBFNvujfLT8RCr947mPYpGvoPYjvdpHnMn57gM3oV5fOO6OwKAssaAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAiAim33Rvlp+IhV+8dzHsUjX0HsR3u0jzmT89wGb0K8vnHdHYFAWWNARARARARARARARARARARARARARARARARARARARARARARARARARARARARARTb7o3y0/EQq/eO5j2KRr6D2I73aR5zJ+e4DN6FeXzjujsCgLLGgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIgIpt90b5afiIVfvHcx7FI19B7Ed7tI85k/PcBm9CvL5x3R2BQFljQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEU2+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"
  },
  "description": "Tag that send the event data from the Universal Analytics/GA4/Data client to Facebook Conversion API.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "inheritEventName",
    "displayName": "Event Name Setup Method",
    "selectItems": [
      {
        "value": "inherit",
        "displayValue": "Inherit from client"
      },
      {
        "value": "override",
        "displayValue": "Override"
      }
    ],
    "simpleValueType": true,
    "subParams": [
      {
        "type": "RADIO",
        "name": "eventName",
        "radioItems": [
          {
            "value": "standard",
            "displayValue": "Standard",
            "subParams": [
              {
                "type": "SELECT",
                "name": "eventNameStandard",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "PageView",
                    "displayValue": "PageView"
                  },
                  {
                    "value": "AddPaymentInfo",
                    "displayValue": "AddPaymentInfo"
                  },
                  {
                    "value": "AddToCart",
                    "displayValue": "AddToCart"
                  },
                  {
                    "value": "AddToWishlist",
                    "displayValue": "AddToWishlist"
                  },
                  {
                    "value": "CompleteRegistration",
                    "displayValue": "CompleteRegistration"
                  },
                  {
                    "value": "Contact",
                    "displayValue": "Contact"
                  },
                  {
                    "value": "CustomizeProduct",
                    "displayValue": "CustomizeProduct"
                  },
                  {
                    "value": "Donate",
                    "displayValue": "Donate"
                  },
                  {
                    "value": "FindLocation",
                    "displayValue": "FindLocation"
                  },
                  {
                    "value": "InitiateCheckout",
                    "displayValue": "InitiateCheckout"
                  },
                  {
                    "value": "Lead",
                    "displayValue": "Lead"
                  },
                  {
                    "value": "Purchase",
                    "displayValue": "Purchase"
                  },
                  {
                    "value": "Schedule",
                    "displayValue": "Schedule"
                  },
                  {
                    "value": "Search",
                    "displayValue": "Search"
                  },
                  {
                    "value": "StartTrial",
                    "displayValue": "StartTrial"
                  },
                  {
                    "value": "SubmitApplication",
                    "displayValue": "SubmitApplication"
                  },
                  {
                    "value": "Subscribe",
                    "displayValue": "Subscribe"
                  },
                  {
                    "value": "ViewContent",
                    "displayValue": "ViewContent"
                  }
                ],
                "simpleValueType": true
              }
            ]
          },
          {
            "value": "custom",
            "displayValue": "Custom",
            "subParams": [
              {
                "type": "TEXT",
                "name": "eventNameCustom",
                "simpleValueType": true
              }
            ]
          }
        ],
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "inheritEventName",
            "paramValue": "override",
            "type": "EQUALS"
          }
        ],
        "displayName": "Event Type"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "accessToken",
    "displayName": "API Access Token",
    "simpleValueType": true,
    "help": "Set to your Facebook API Access Token. See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/server-side-api/get-started#access-token\" target\u003d\"_blank\"\u003ehere\u003c/a\u003e for more information.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "Facebook Pixel ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Set to a valid Facebook Pixel ID. You can only add a single Pixel ID per tag."
  },
  {
    "type": "TEXT",
    "name": "testId",
    "displayName": "Test ID",
    "simpleValueType": true,
    "help": "Provide a Test ID if you want to test server-side events in the Test Events feature of Events Manager.",
    "valueHint": "TEST123"
  },
  {
    "displayName": "Server Event Data Override",
    "name": "serverEventDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "serverEventDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "event_id",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "action_source",
                "displayValue": "Action Source"
              },
              {
                "value": "event_time",
                "displayValue": "Event Time"
              },
              {
                "value": "event_source_url",
                "displayValue": "Source URL"
              },
              {
                "value": "opt_out",
                "displayValue": "Opt Out"
              },
              {
                "value": "event_id",
                "displayValue": "Event ID"
              },
              {
                "value": "data_processing_options",
                "displayValue": "Data Processing Options"
              },
              {
                "value": "data_processing_options_country",
                "displayValue": "Data Processing Options Country"
              },
              {
                "value": "data_processing_options_state",
                "displayValue": "Data Processing Options State"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/server-event\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can override."
  },
  {
    "displayName": "User Data",
    "name": "userDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "userDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "em",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "em",
                "displayValue": "Email"
              },
              {
                "value": "ph",
                "displayValue": "Phone"
              },
              {
                "value": "ge",
                "displayValue": "Gender"
              },
              {
                "value": "db",
                "displayValue": "Date of Birth"
              },
              {
                "value": "ln",
                "displayValue": "Last Name"
              },
              {
                "value": "fn",
                "displayValue": "First Name"
              },
              {
                "value": "ct",
                "displayValue": "City"
              },
              {
                "value": "st",
                "displayValue": "State"
              },
              {
                "value": "zp",
                "displayValue": "Zip"
              },
              {
                "value": "country",
                "displayValue": "Country"
              },
              {
                "value": "external_id",
                "displayValue": "External ID"
              },
              {
                "value": "client_ip_address",
                "displayValue": "Client IP address"
              },
              {
                "value": "client_user_agent",
                "displayValue": "Client user agent"
              },
              {
                "value": "fbc",
                "displayValue": "Click ID"
              },
              {
                "value": "fbp",
                "displayValue": "Browser ID"
              },
              {
                "value": "subscription_id",
                "displayValue": "Subscription ID"
              },
              {
                "value": "lead_id",
                "displayValue": "Lead ID"
              },
              {
                "value": "fb_login_id",
                "displayValue": "FB Login ID"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/server-side-api/parameters/user-data\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what user data parameters you can add to the call. If the documentation requires the parameter to be hashed, you \u003cstrong\u003emust\u003c/strong\u003e hash it with SHA256, or the tag will do this automatically before sending the event to Facebook."
  },
  {
    "displayName": "Custom Data",
    "name": "customDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "customDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/custom-data\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can add to the call."
  }
]


___SANDBOXED_JS_FOR_SERVER___

const encodeUriComponent = require('encodeUriComponent');
const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const Math = require('Math');
const sendHttpRequest = require('sendHttpRequest');
const getTimestampMillis = require('getTimestampMillis');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');
const sha256Sync = require('sha256Sync');

const containerVersion = getContainerVersion();
const isDebug = containerVersion.debugMode;

const eventData = getAllEventData();

let fbc = getCookieValues('_fbc')[0];
const fbp = getCookieValues('_fbp')[0];

if (!fbc) {
    let url = eventData.page_location;

    if (url && url.indexOf('fbclid=') !== -1) {
        fbc = 'fb.1.' + getTimestampMillis() + '.' + url.split('fbclid=')[1].split('&')[0];
    }
}


const apiVersion = '11.0';
const postUrl = 'https://graph.facebook.com/v' + apiVersion + '/' + enc(data.pixelId) + '/events?access_token=' + enc(data.accessToken);
let postBody = 'data=' + enc(JSON.stringify([mapEvent(eventData, data)]));

if (data.testId) {
    postBody += '&test_event_code=' + enc(data.testId);
}

sendHttpRequest(postUrl, (statusCode, headers, body) => {
    if (statusCode >= 200 && statusCode < 400) {
        if (fbc) {
            setCookie('_fbc', fbc, {
                domain: 'auto',
                path: '/',
                'max-age': 15552000, // 6 month
                samesite: 'Lax',
                secure: true
            });
        }

        if (fbp) {
            setCookie('_fbp', fbp, {
                domain: 'auto',
                path: '/',
                'max-age': 15552000, // 6 month
                samesite: 'Lax',
                secure: true
            });
        }

        data.gtmOnSuccess();
    } else {
        data.gtmOnFailure();
    }
}, {headers: {content_type: 'application/x-www-form-urlencoded'}, method: 'POST', timeout: 3500}, postBody);


function getEventName(data) {
    if (data.inheritEventName === 'inherit') {
        let eventName = eventData.event_name;

        let gaToFacebookEventName = {
            'page_view': 'PageView',
            'add_payment_info': 'AddPaymentInfo',
            'add_to_cart': 'AddToCart',
            'add_to_wishlist': 'AddToWishlist',
            'sign_up': 'CompleteRegistration',
            'begin_checkout': 'InitiateCheckout',
            'generate_lead': 'Lead',
            'purchase': 'Purchase',
            'search': 'Search',
            'view_item': 'ViewContent',

            'contact': 'Contact',
            'customize_product': 'CustomizeProduct',
            'donate': 'Donate',
            'find_location': 'FindLocation',
            'schedule': 'Schedule',
            'start_trial': 'StartTrial',
            'submit_application': 'SubmitApplication',
            'subscribe': 'Subscribe',

            'gtm4wp.addProductToCartEEC': 'AddToCart',
            'gtm4wp.productClickEEC': 'ViewContent',
            'gtm4wp.checkoutOptionEEC': 'InitiateCheckout',
            'gtm4wp.checkoutStepEEC': 'AddPaymentInfo',
            'gtm4wp.orderCompletedEEC': 'Purchase'
        };

        if (!gaToFacebookEventName[eventName]) {
            return eventName;
        }

        return gaToFacebookEventName[eventName];
    }

    return data.eventName === 'standard' ? data.eventNameStandard : data.eventNameCustom;
}

function mapEvent(eventData, data) {
    let eventName = getEventName(data);

    let mappedData = {
        event_name: eventName,
        action_source: 'website',
        event_source_url: eventData.page_location,
        event_time: Math.floor(getTimestampMillis() / 1000),
        custom_data: {},
        user_data: {
            client_ip_address: eventData.ip_override,
            client_user_agent: eventData.user_agent,
        }
    };

    if (fbc) mappedData.user_data.fbc = fbc;
    if (fbp) mappedData.user_data.fbp = fbp;

    mappedData = addServerEventData(eventData, data, mappedData);
    mappedData = addUserData(eventData, mappedData);
    mappedData = addEcommerceData(eventData, mappedData);
    mappedData = overrideDataIfNeeded(data, mappedData);
    mappedData = hashDataIfNeeded(mappedData);

    if (isDebug) {
        logToConsole('Event raw data: ', eventData);
        logToConsole('Facebook mapped data: ', mappedData);
    }

    return mappedData;
}


function enc(data) {
    data = data || '';
    return encodeUriComponent(data);
}

function isHashed(value) {
    if (!value) {
        return false;
    }

    return value.match('^[A-Fa-f0-9]{64}$') !== null;
}


function hashData(value) {
    if (!value) {
        return value;
    }

    if (isHashed(value)) {
        return value;
    }

    return sha256Sync(value.trim().toLowerCase(), {outputEncoding: 'hex'});
}


function hashDataIfNeeded(mappedData) {
    if (mappedData.user_data) {
        for (let key in mappedData.user_data) {
            if (key === 'em' || key === 'ph' || key === 'ge' || key === 'db' || key === 'ln' || key === 'fn' || key === 'ct' || key === 'st' || key === 'zp' || key === 'country') {
                mappedData.user_data[key] = hashData(mappedData.user_data[key]);
            }
        }
    }

    return mappedData;
}

function overrideDataIfNeeded(data,mappedData) {
    if (data.userDataList) {
        data.userDataList.forEach(d => {
            mappedData.user_data[d.name] = d.value;
        });
    }

    if (data.customDataList) {
        data.customDataList.forEach(d => {
            mappedData.custom_data[d.name] = d.value;
        });
    }

    return mappedData;
}

function addEcommerceData(eventData, mappedData) {
    if (eventData.items && eventData.items[0]) {
        mappedData.custom_data.contents = {};
        mappedData.custom_data.content_type = 'product';

        if (!eventData.items[1]) {
            if (eventData.items[0].item_name) mappedData.custom_data.content_name = eventData.items[0].item_name;
            if (eventData.items[0].item_category) mappedData.custom_data.content_category = eventData.items[0].item_category;
        }

        eventData.items.forEach((d,i) => {
            mappedData.custom_data.contents[i] = {
                'id': d.item_id,
                'quantity': d.quantity,
                'item_price': d.price,
            };
        });
    }

    if (eventData['x-ga-mp1-ev']) mappedData.custom_data.value = eventData['x-ga-mp1-ev'];
    else if (eventData['x-ga-mp1-tr']) mappedData.custom_data.value = eventData['x-ga-mp1-tr'];
    else if (eventData.value) mappedData.custom_data.value = eventData.value;

    if (eventData.currency) mappedData.custom_data.currency = eventData.currency;
    if (eventData.transaction_id) mappedData.custom_data.order_id = eventData.transaction_id;


    if (mappedData.event_name === 'Purchase') {
        if (!mappedData.custom_data.currency) {
            mappedData.custom_data.currency = 'USD';
        }
        if (!mappedData.custom_data.value) {
            mappedData.custom_data.value = 0;
        }
    }

    return mappedData;
}

function addUserData(eventData, mappedData) {
    if (eventData.fb_login_id) mappedData.user_data.fb_login_id = eventData.fb_login_id;

    if (eventData.external_id) mappedData.user_data.external_id = eventData.external_id;
    else if (eventData.user_id) mappedData.user_data.external_id = eventData.user_id;
    else if (eventData.userId) mappedData.user_data.external_id = eventData.userId;

    if (eventData.subscription_id) mappedData.user_data.subscription_id = eventData.subscription_id;
    else if (eventData.subscriptionId) mappedData.user_data.subscription_id = eventData.subscriptionId;

    if (eventData.lead_id) mappedData.user_data.lead_id = eventData.lead_id;
    else if (eventData.leadId) mappedData.user_data.lead_id = eventData.leadId;

    if (eventData.lastName) mappedData.user_data.ln = eventData.lastName;
    else if (eventData.LastName) mappedData.user_data.ln = eventData.LastName;
    else if (eventData.nameLast) mappedData.user_data.ln = eventData.nameLast;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.last_name) mappedData.user_data.ln = eventData.user_data.address.last_name;

    if (eventData.firstName) mappedData.user_data.fn = eventData.firstName;
    else if (eventData.FirstName) mappedData.user_data.fn = eventData.FirstName;
    else if (eventData.nameFirst) mappedData.user_data.fn = eventData.nameFirst;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.first_name) mappedData.user_data.fn = eventData.user_data.address.first_name;

    if (eventData.email) mappedData.user_data.em = eventData.email;
    else if (eventData.user_data && eventData.user_data.email_address) mappedData.user_data.em = eventData.user_data.email_address;

    if (eventData.phone) mappedData.user_data.ph = eventData.phone;
    else if (eventData.user_data && eventData.user_data.phone_number) mappedData.user_data.ph = eventData.user_data.phone_number;

    if (eventData.city) mappedData.user_data.ct = eventData.city;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.city) mappedData.user_data.ct = eventData.user_data.address.city;

    if (eventData.state) mappedData.user_data.st = eventData.state;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.region) mappedData.user_data.st = eventData.user_data.address.region;

    if (eventData.zip) mappedData.user_data.zp = eventData.zip;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.postal_code) mappedData.user_data.zp = eventData.user_data.address.postal_code;

    if (eventData.countryCode) mappedData.user_data.country = eventData.countryCode;
    else if (eventData.user_data && eventData.user_data.address && eventData.user_data.address.country) mappedData.user_data.country = eventData.user_data.address.country;

    if (eventData.gender) mappedData.user_data.ge = eventData.gender;
    if (eventData.db) mappedData.user_data.db = eventData.db;

    return mappedData;
}


function addServerEventData(eventData, data, mappedData) {
    let serverEventDataList = {};

    if (eventData.transaction_id) mappedData.event_id = eventData.transaction_id;

    if (data.serverEventDataList) {
        data.serverEventDataList.forEach(d => {
            serverEventDataList[d.name] = d.value;
        });
    }

    if (serverEventDataList) {
        if (serverEventDataList.action_source) mappedData.action_source = serverEventDataList.action_source;
        if (serverEventDataList.event_time) mappedData.event_time = serverEventDataList.event_time;
        if (serverEventDataList.event_source_url) mappedData.event_source_url = serverEventDataList.event_source_url;
        if (serverEventDataList.opt_out) mappedData.opt_out = serverEventDataList.opt_out;
        if (serverEventDataList.event_id) mappedData.event_id = serverEventDataList.event_id;

        if (serverEventDataList.data_processing_options) {
            mappedData.data_processing_options = serverEventDataList.data_processing_options;

            if (serverEventDataList.data_processing_options_country) mappedData.data_processing_options_country = serverEventDataList.data_processing_options_country;
            if (serverEventDataList.data_processing_options_state) mappedData.data_processing_options_state = serverEventDataList.data_processing_options_state;
        }
    }

    return mappedData;
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbc"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbp"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://graph.facebook.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_fbc"
              },
              {
                "type": 1,
                "string": "_fbp"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: ''


___NOTES___

Created on 10/11/2020, 18:14:02
